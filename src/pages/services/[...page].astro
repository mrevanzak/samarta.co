---
import type { GetStaticPaths, InferGetStaticPropsType } from 'astro';

import Headline from '@/components/ui/Headline.astro';
import Hero from '@/components/widgets/Hero.astro';
import Service from '@/components/widgets/Service.astro';
import Layout from '@/layouts/PageLayout.astro';
import Caraousel from '@/components/ui/Carousel.astro';
import { findImage } from '@/utils/images';
import { getStaticPathsProjectList, projectListRobots } from '@/utils/project';

export const prerender = true;

export const getStaticPaths = (async ({ paginate }) => {
  return await getStaticPathsProjectList({ paginate });
}) satisfies GetStaticPaths;

type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { page } = Astro.props;
const currentPage = page.currentPage ?? 1;

// const allCategories = await findCategories();
// const allTags = await findTags();
const images = [
  {
    src: (await findImage('@/assets/images/hero-6.png')) as string,
    alt: 'Our Services',
  },
];

const carouselImages = [
  {
    src: (await findImage('@/assets/images/hero.png')) as string,
    alt: 'Service Image 1',
  },
  {
    src: (await findImage('@/assets/images/hero-2.png')) as string,
    alt: 'Service Image 2',
  },
  {
    src: (await findImage('@/assets/images/hero-3.png')) as string,
    alt: 'Service Image 3',
  },
]

const metadata = {
  title: `Project${currentPage > 1 ? ` â€” Page ${currentPage}` : ''}`,
  robots: {
    index: projectListRobots?.index && currentPage === 1,
    follow: projectListRobots?.follow,
  },
  openGraph: {
    type: 'blog',
  },
};
---

<Layout metadata={metadata}>
  <Hero slot="hero" images={images} imageClassName="h-[60vh]">
    <Fragment slot="overlay">
      <div class="pointer-events-none absolute inset-0 bg-gradient-to-r from-background"></div>
    </Fragment>
  </Hero>
  <section class="layout my-8 space-y-8 lg:my-16">
    <Headline title="Our Services" className="mx-0" />

    <!-- {page.data.map((project, index) => <ProjectList project={project} reversed={index % 2 === 0} />)} -->
    <!-- {page.data.map((service, index) => <Service service={service} reversed={index % 2 === 0} />)} -->
    <Service
      reversed
      className="!pt-0"
      title="Perencanaan Konstruksi"
      images={[
        { src: '@/assets/images/hero.png', alt: 'Service Image 1' },
        // { src: '@/assets/images/hero-2.png', alt: 'Service Image 2' },
        // { src: '@/assets/images/hero-3.png', alt: 'Service Image 3' },
      ]}
      contents={[
        {
          heading: 'Ruang Lingkup',
          type: 'list',
          point: [
            'Masterplan Design',
            'Perencanaan Desain Arsitektural dan Perancangan Struktur',
            'Perhitungan Rencana Anggaran Biaya dan Biaya Komersil',
            'Detail Engineering Design (DED) dan Spesifikasi Teknis',
            'Manajemen Proyek Konstruksi',
            'Structure Assesment',
          ],
        },
        {
          heading: 'Design',
          type: 'label',
          point: [
            'Commercial Buildings',
            'Perencanaan Desain Road and Bridge',
            'Port, Airport, Industry Facility',
            'Soil Improvement',
          ],
        },
      ]}
    />

    <Service
      title="Perencanaan Tata Ruang"
      images={[
        { src: '@/assets/images/hero.png', alt: 'Service Image 1' },
        // { src: '@/assets/images/hero-2.png', alt: 'Service Image 2' },
        // { src: '@/assets/images/hero-3.png', alt: 'Service Image 3' },
      ]}
      contents={[
        {
          heading: 'Ruang Lingkup',
          type: 'list',
          point: [
            'Penyusunan Rencana Umum Tata Ruang yaitu Rencana Tata Ruang Wilayah (RTRW)',
            'Penyusunan Rencana Rinci Tata Ruang meliputi Rencana Detail Tata Ruang (RDTR), Rencana Tata Bangungan dan Lingkungan (RTBL), Rencana Tata Ruang Pulau/Kepulauan, Rencana Tata Ruang Kawasan Strategis (RTRKS), dan Rencana Rinci lain',
            'Penyusunan dokumen perencanaan periodik meliputi Rencana Pembangunan Jangka Panjang (RPJP) Pembangunan Jangka Menengah (RPJM)',
          ],
        },
      ]}
    />

    <Service
      reversed
      title="Standar Harga dan RKBMD"
      images={[
        { src: '@/assets/images/hero.png', alt: 'Service Image 1' },
        // { src: '@/assets/images/hero-2.png', alt: 'Service Image 2' },
        // { src: '@/assets/images/hero-3.png', alt: 'Service Image 3' },
      ]}
      contents={[
        {
          heading: 'Ruang Lingkup',
          type: 'list',
          point: [
            'Penyusunan Manajemen Risiko (SOP)',
            'Penyusunan standarisasi komponen dan standarisasi harga',
            'Simulasi implementasi standar harga fisik konstruksi',
            'Penyusunan Rencana Kebutuhan Barang Milik Daerah',
            'Penyusunan kebijakan Peraturan Daerah mengenai Standar Harga Satuan dan Standar Kebutuhan Barang Milik Daerah',
          ],
        },
        {
          heading: 'Design',
          type: 'label',
          point: ['SSH & SBU', 'HSPPK', 'ASB Fisik dan Non Fisik', 'SKBMD'],
        },
      ]}
    />

    <Service
      title="Analisa Dampak Ruang"
      images={[
        { src: '@/assets/images/hero.png', alt: 'Service Image 1' },
        // { src: '@/assets/images/hero-2.png', alt: 'Service Image 2' },
        // { src: '@/assets/images/hero-3.png', alt: 'Service Image 3' },
      ]}
      contents={[
        {
          heading: 'Ruang Lingkup',
          type: 'list',
          point: [
            'Penyusunan Kajian Lingkungan Hidup Strategis (KLHS)',
            'Penyusunan Dokumen Analisis Dampak Lingkungan (AMDAL)',
            'Penyunan Upaya Pengelolaan Lingkungan dan Upaya Pemantauan Lingkungan (UKL/UPL)',
            'Surat Pernyataan Kesanggupan Pengelolaan dan Pemantauan Lingkungan Hidup (SPPL)',
          ],
        },
      ]}
    />
    <Caraousel images={carouselImages}/>
  </section>
</Layout>
